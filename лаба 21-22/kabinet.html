<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@700&family=Jura:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.cdnfonts.com/css/eras-itc');
    
    body {
      margin: 0;
      font-family: 'Jura', sans-serif;
      background-image: url('images/background.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      position: relative;
      color: #333;
    }

    .back-button {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 50px;
      height: 50px;
      border: 1px solid #000;
      border-radius: 50%;
      background-color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      z-index: 1000;
    }

    .back-button:hover {
      background-color: #f0f0f0;
    }

    .back-button i {
      color: #000;
      font-size: 28px;
    }

    /* –ö–ù–û–ü–ö–ê –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–ò - –ö–†–ê–°–ù–ê–Ø */
    .admin-panel-link {
      position: absolute;
      top: 20px;
      right: 20px;
      display: none; /* –°–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    }

    .admin-panel-link a {
      background-color: #ff6b6b;
      color: white;
      padding: 12px 20px;
      border-radius: 0;
      text-decoration: none;
      font-family: 'Jura', sans-serif;
      font-size: 16px;
      border: 1px solid #000;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      transition: all 0.3s;
    }

    .admin-panel-link a:hover {
      background-color: #ff5252;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .page-title {
      text-align: center;
      font-size: 28px;
      font-weight: 700;
      color: #000;
      font-family: 'Jura', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px 0 30px 0;
    }

    .title-image {
      width: 50px;
      height: 50px;
      margin-right: 15px;
    }

    .container {
      width: 96%;
      max-width: 1400px;
      background-color: #f0f0f0;
      border-radius: 0;
      padding: 30px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
      margin-bottom: 30px;
    }

    .profile-section {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
    }

    .photo-container {
      width: 250px;
      height: 250px;
      background-color: white;
      border-radius: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 40px;
      overflow: hidden;
      flex-shrink: 0;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      position: relative;
    }

    .profile-photo {
      width: 230px;
      height: 230px;
      border-radius: 50%;
      object-fit: cover;
    }

    .user-data {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: 250px;
    }

    .welcome-text {
      text-align: center;
      margin-bottom: 20px;
    }

    .welcome-text h2 {
      font-family: 'Jura', sans-serif;
      font-size: 28px;
      margin: 0 0 10px 0;
      font-weight: 600;
    }

    .welcome-text p {
      margin: 0;
      font-size: 20px;
    }

    .data-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .data-group {
      display: flex;
      flex-direction: column;
    }

    .data-label {
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 16px;
    }

    .data-field {
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 0;
      padding: 8px 12px;
      font-size: 18px;
      height: 40px;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    }

    .password-field {
      letter-spacing: 3px;
    }

    .edit-btn {
      background: none;
      border: none;
      color: #f8c8dc;
      cursor: pointer;
      margin-left: 10px;
      font-size: 16px;
    }

    /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
    .main-content-section {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 300px;
    }

    /* –ü–†–û–°–¢–û –ü–£–°–¢–û–ï –ü–†–û–°–¢–†–ê–ù–°–¢–í–û */
    .empty-space {
      height: 50px;
      width: 100%;
    }

    .menu-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 30px;
      width: 1300px;
      margin: 0 auto;
    }

    .menu-button {
      padding: 18px;
      background-color: white;
      border: 1px solid #000;
      border-radius: 0;
      font-size: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Jura', sans-serif;
      font-weight: 500;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      width: 100%;
    }

    .menu-button:hover {
      background-color: #f8f8f8;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .menu-button.active {
      background-color: #f8c8dc;
      color: #000;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .section-title {
      font-family: 'Jura', sans-serif;
      font-size: 28px;
      margin-bottom: 20px;
      text-align: center;
      font-weight: 600;
    }

    /* –ö–û–ù–¢–ï–ù–¢–ù–´–ï –û–ë–õ–ê–°–¢–ò (–°–ö–†–´–¢–´ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ) */
    .content-area {
      width: 100%;
      display: none;
    }

    .content-area.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* –ù–æ–≤—ã–π —Å—Ç–∏–ª—å –¥–ª—è –±–µ–ª–æ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ –∑–∞–ø–∏—Å–µ–π */
    .appointments-container {
      background-color: white;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    }

    .appointments-intro {
      text-align: center;
      font-size: 20px;
      margin-bottom: 25px;
    }

    .appointment-card {
      border: 1px solid #ddd;
      border-radius: 0;
      padding: 20px;
      margin-bottom: 20px;
      background-color: #f0f0f0;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    }

    .appointment-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .appointment-title {
      font-size: 22px;
      font-weight: bold;
    }

    .appointment-price {
      font-size: 20px;
      color: #333;
    }

    .appointment-details {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    .appointment-date, .appointment-time {
      font-size: 18px;
    }

    .cancel-option {
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }

    .cancel-text {
      margin-right: 10px;
      font-size: 18px;
    }

    .cancel-link {
      color: #f8c8dc;
      font-weight: bold;
      cursor: pointer;
      font-size: 18px;
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
    .action-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin-top: 30px;
      width: 220px;
      margin-left: auto;
      margin-right: auto;
    }

    .book-button {
      padding: 14px 20px;
      background-color: #f8c8dc;
      border: 1px solid #000;
      border-radius: 0;
      font-size: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      color: #333;
      font-family: 'Jura', sans-serif;
      font-weight: 500;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      width: 100%;
    }

    .book-button:hover {
      background-color: #f4a6c1;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ */
    .user-reviews-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 20px;
    }
    
    .user-review-card {
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 0;
      padding: 20px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    }
    
    .user-review-card h4 {
      margin-top: 0;
      color: #333;
      font-family: 'Jura', sans-serif;
      font-size: 20px;
      margin-bottom: 10px;
    }
    
    .user-review-card p {
      margin: 10px 0;
      font-size: 16px;
    }

    .review-rating {
      color: #ffd700;
      font-size: 18px;
      letter-spacing: 3px;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */
    .edit-form {
      background-color: white;
      padding: 30px;
      border-radius: 0;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
      max-width: 600px;
      margin: 0 auto;
    }

    .edit-form-group {
      margin-bottom: 20px;
    }

    .edit-form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      font-size: 16px;
    }

    .edit-form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 0;
      font-size: 16px;
      font-family: 'Jura', sans-serif;
    }

    .save-btn {
      background-color: #f8c8dc;
      color: #000;
      border: 1px solid #000;
      padding: 12px 30px;
      font-family: 'Jura', sans-serif;
      font-size: 18px;
      cursor: pointer;
      border-radius: 0;
      margin-top: 20px;
      width: 100%;
    }

    .save-btn:hover {
      background-color: #f4a6c1;
    }

    /* –ö–ù–û–ü–ö–ê –í–´–•–û–î–ê (–í–°–ï–ì–î–ê –í–ò–î–ù–ê) - –ö–†–ê–°–ù–ê–Ø */
    .logout-container {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
    }

    .logout-button {
      background-color: #ff6b6b;
      color: white;
      border: none;
      padding: 12px 25px;
      font-family: 'Jura', sans-serif;
      font-size: 16px;
      cursor: pointer;
      border-radius: 0;
      transition: background-color 0.3s ease;
      width: 220px;
      margin: 0 auto;
      display: block;
    }

    .logout-button:hover {
      background-color: #ff5252;
    }

    .logout-button i {
      margin-right: 8px;
    }

    @media (max-width: 768px) {
      .profile-section {
        flex-direction: column;
      }
      
      .photo-container {
        margin-right: 0;
        margin-bottom: 20px;
        align-self: center;
      }
      
      .user-data {
        height: auto;
      }
      
      .data-container {
        grid-template-columns: 1fr;
      }
      
      .menu-buttons {
        width: 95%;
      }
      
      .action-buttons {
        width: 95%;
      }
      
      .empty-space {
        height: 30px;
      }

      .admin-panel-link {
        position: relative;
        top: 0;
        right: 0;
        margin: 10px 0;
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>

  <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
  <a href="index.html" class="back-button">
    <i class="fas fa-reply"></i> 
  </a>

  <!-- –ö–ù–û–ü–ö–ê –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–ò - –ö–†–ê–°–ù–ê–Ø -->
  <div id="adminPanelLink" class="admin-panel-link">
    <a href="admin-panel.html">
      <i class="fas fa-user-shield"></i> –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
    </a>
  </div>

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–≤–µ—Ä—Ö—É -->
  <div class="page-title">
    <img src="images/8.png" alt="–ò–∫–æ–Ω–∫–∞" class="title-image">
    –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
  </div>

  <!-- –°–µ—Ä—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ (96% —à–∏—Ä–∏–Ω—ã) -->
  <div class="container">
    <!-- –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Å —Ñ–æ—Ç–æ –∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="profile-section">
      <!-- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
      <div class="photo-container">
        <img src="images/profile-photo.jpg" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è" class="profile-photo" id="profilePhoto">
      </div>
      
      <!-- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ø—Ä–∞–≤–∞ -->
      <div class="user-data">
        <div class="welcome-text">
          <h2 id="welcomeName">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å,</h2>
          <p id="userRoleText">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ:</p>
        </div>
        
        <div class="data-container">
          <div class="data-group">
            <div class="data-label">–ò–º—è</div>
            <div class="data-field" id="firstNameField">
              <span id="firstNameText"></span>
              <button class="edit-btn" data-field="firstName">
                <i class="fas fa-edit"></i>
              </button>
            </div>
          </div>
          
          <div class="data-group">
            <div class="data-label">–§–∞–º–∏–ª–∏—è</div>
            <div class="data-field" id="lastNameField">
              <span id="lastNameText"></span>
              <button class="edit-btn" data-field="lastName">
                <i class="fas fa-edit"></i>
              </button>
            </div>
          </div>
          
          <div class="data-group">
            <div class="data-label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
            <div class="data-field" id="phoneField">
              <span id="phoneText"></span>
              <button class="edit-btn" data-field="phone">
                <i class="fas fa-edit"></i>
              </button>
            </div>
          </div>
          
          <div class="data-group">
            <div class="data-label">–ü–∞—Ä–æ–ª—å</div>
            <div class="data-field password-field" id="passwordField">
              <span id="passwordText">******</span>
              <button class="edit-btn" data-field="password">
                <i class="fas fa-edit"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Å –º–µ–Ω—é –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º -->
    <div class="main-content-section">
      <!-- –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é –î–õ–Ø –û–ë–´–ß–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô (–ë–ï–õ–´–ï) -->
      <div class="menu-buttons" id="userMenuButtons">
        <div class="menu-button" data-target="appointments">–ú–æ–∏ –∑–∞–ø–∏—Å–∏</div>
        <div class="menu-button" data-target="reviews">–ú–æ–∏ –æ—Ç–∑—ã–≤—ã</div>
        <div class="menu-button" data-target="edit">–ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é –î–õ–Ø –ê–î–ú–ò–ù–û–í (–¢–û–ñ–ï –ë–ï–õ–´–ï) -->
      <div class="menu-buttons" id="adminMenuButtons" style="display: none;">
        <div class="menu-button" data-target="appointments">–í—Å–µ –∑–∞–ø–∏—Å–∏</div>
        <div class="menu-button" data-target="reviews">–í—Å–µ –æ—Ç–∑—ã–≤—ã</div>
        <div class="menu-button" data-target="edit">–ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</div>
        <div class="menu-button" data-target="statistics">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
      </div>

      <!-- –ü–£–°–¢–û–ï –ü–†–û–°–¢–†–ê–ù–°–¢–í–û –ø–æ—Å–ª–µ –∫–Ω–æ–ø–æ–∫ -->
      <div class="empty-space"></div>

      <!-- –°–µ–∫—Ü–∏—è —Å –∑–∞–ø–∏—Å—è–º–∏ (–°–ö–†–´–¢–ê –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ) -->
      <div class="content-area" id="appointments">
        <div class="appointments-container">
          <p class="appointments-intro" id="appointmentsIntro">–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã:</p>
          
          <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞ -->
          <div id="appointmentsList">
            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
          </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è" (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) -->
        <div class="action-buttons" id="userBookButton">
          <a href="katalog.html" class="book-button" id="bookButton">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–æ–≤—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É</a>
        </div>
      </div>

      <!-- –°–µ–∫—Ü–∏—è —Å –æ—Ç–∑—ã–≤–∞–º–∏ (–°–ö–†–´–¢–ê –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ) -->
      <div class="content-area" id="reviews">
        <h2 class="section-title" id="reviewsTitle">–ú–æ–∏ –æ—Ç–∑—ã–≤—ã</h2>
        <div id="reviewsContent" class="appointments-container">
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∑—ã–≤–æ–≤...</p>
        </div>
      </div>

      <!-- –°–µ–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–°–ö–†–´–¢–ê –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ) -->
      <div class="content-area" id="edit">
        <h2 class="section-title">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</h2>
        <div class="appointments-container">
          <form id="editForm" class="edit-form">
            <div class="edit-form-group">
              <label for="editFirstName">–ò–º—è:</label>
              <input type="text" id="editFirstName" name="firstName" required>
            </div>
            
            <div class="edit-form-group">
              <label for="editLastName">–§–∞–º–∏–ª–∏—è:</label>
              <input type="text" id="editLastName" name="lastName" required>
            </div>
            
            <div class="edit-form-group">
              <label for="editPhone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
              <input type="tel" id="editPhone" name="phone" required>
            </div>
            
            <div class="edit-form-group">
              <label for="editPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –º–µ–Ω—è—Ç—å):</label>
              <input type="password" id="editPassword" name="password">
            </div>
            
            <div class="edit-form-group">
              <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
              <input type="password" id="confirmPassword" name="confirmPassword">
            </div>
            
            <button type="submit" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
          </form>
        </div>
      </div>

      <!-- –°–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–¢–û–õ–¨–ö–û –î–õ–Ø –ê–î–ú–ò–ù–û–í) -->
      <div class="content-area" id="statistics">
        <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∞–π—Ç–∞</h2>
        <div class="appointments-container">
          <div id="statsContent">
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ (–í–°–ï–ì–î–ê –í–ò–î–ù–ê) - –ö–†–ê–°–ù–ê–Ø -->
    <div class="logout-container">
      <button id="logoutButton" class="logout-button">
        <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
      </button>
    </div>
  </div>

  <script>
    // ============ –ì–õ–û–ë–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ============

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    function getCurrentUser() {
      const userJson = localStorage.getItem('currentUser');
      return userJson ? JSON.parse(userJson) : null;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    function getUsers() {
      const usersJson = localStorage.getItem('beautySalonUsers');
      return usersJson ? JSON.parse(usersJson) : [];
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    function updateUser(updatedUser) {
      const users = getUsers();
      const userIndex = users.findIndex(u => u.id === updatedUser.id);
      if (userIndex !== -1) {
        users[userIndex] = updatedUser;
        localStorage.setItem('beautySalonUsers', JSON.stringify(users));
        localStorage.setItem('currentUser', JSON.stringify(updatedUser));
        return true;
      }
      return false;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–∑—ã–≤–æ–≤
    function getAllReviews() {
      const reviewsJson = localStorage.getItem('beautySalonAllReviews');
      if (reviewsJson) {
        return JSON.parse(reviewsJson);
      } else {
        // –ï—Å–ª–∏ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤, —Å–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
        return {
          '–†–µ—Å–Ω–∏—Ü—ã': [],
          '–ë—Ä–æ–≤–∏': [],
          '–°–∫–∞–π—Å—ã': []
        };
      }
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
    function getAllAppointments() {
      const appointmentsJson = localStorage.getItem('beautySalonAppointments');
      return appointmentsJson ? JSON.parse(appointmentsJson) : [];
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
    function updateAppointment(updatedAppointment) {
      const appointments = getAllAppointments();
      const appointmentIndex = appointments.findIndex(a => a.id === updatedAppointment.id);
      if (appointmentIndex !== -1) {
        appointments[appointmentIndex] = updatedAppointment;
        localStorage.setItem('beautySalonAppointments', JSON.stringify(appointments));
        return true;
      }
      return false;
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
    function deleteAppointment(appointmentId) {
      const appointments = getAllAppointments();
      const updatedAppointments = appointments.filter(a => a.id !== appointmentId);
      localStorage.setItem('beautySalonAppointments', JSON.stringify(updatedAppointments));
      return true;
    }

    // ============ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ============

    function loadUserData() {
      const currentUser = getCurrentUser();
      
      if (!currentUser) {
        // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É!');
        window.location.href = 'registracii.html';
        return false;
      }
      
      console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', currentUser);
      
      // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      document.getElementById('firstNameText').textContent = currentUser.firstName || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
      document.getElementById('lastNameText').textContent = currentUser.lastName || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
      document.getElementById('phoneText').textContent = currentUser.phone || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
      document.getElementById('welcomeName').textContent = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${currentUser.firstName}`;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      const roleText = currentUser.role === 'admin' ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
      document.getElementById('userRoleText').textContent = `–†–æ–ª—å: ${roleText}`;
      
      // ===== –†–∞–∑–Ω—ã–µ –º–µ–Ω—é –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π =====
      if (currentUser.role === 'admin') {
        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –∞–¥–º–∏–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω—Å–∫–æ–µ –º–µ–Ω—é');
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω—Å–∫–æ–µ –º–µ–Ω—é
        document.getElementById('userMenuButtons').style.display = 'none';
        document.getElementById('adminMenuButtons').style.display = 'flex';
        document.getElementById('adminPanelLink').style.display = 'block';
        document.getElementById('userBookButton').style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–ø–∏—Å–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞
      } else {
        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ã—á–Ω–æ–µ –º–µ–Ω—é');
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ã—á–Ω–æ–µ –º–µ–Ω—é
        document.getElementById('userMenuButtons').style.display = 'flex';
        document.getElementById('adminMenuButtons').style.display = 'none';
        document.getElementById('adminPanelLink').style.display = 'none';
        document.getElementById('userBookButton').style.display = 'flex';
      }
      // ===== –ö–û–ù–ï–¶ –î–û–ë–ê–í–õ–ï–ù–ù–û–ì–û –ö–û–î–ê =====
      
      // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      document.getElementById('editFirstName').value = currentUser.firstName || '';
      document.getElementById('editLastName').value = currentUser.lastName || '';
      document.getElementById('editPhone').value = currentUser.phone || '';
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è, –µ—Å–ª–∏ –µ—Å—Ç—å
      if (currentUser.photo) {
        document.getElementById('profilePhoto').src = currentUser.photo;
      }
      
      return currentUser;
    }

    // ============ –ó–ê–ì–†–£–ó–ö–ê –ó–ê–ü–ò–°–ï–ô ============

    function loadAppointments() {
      const currentUser = getCurrentUser();
      const isAdmin = currentUser.role === 'admin';
      const appointments = getAllAppointments();
      const users = getUsers();
      
      console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–ø–∏—Å–∏. –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:', appointments.length);
      console.log('–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', currentUser);
      
      let appointmentsHTML = '';
      
      if (isAdmin) {
        // –î–ª—è –∞–¥–º–∏–Ω–∞: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –í–°–ï –∑–∞–ø–∏—Å–∏
        document.getElementById('appointmentsIntro').textContent = '–í—Å–µ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤:';
        
        if (appointments.length === 0) {
          appointmentsHTML = '<div class="appointment-card"><p>–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã</p></div>';
        } else {
          // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (—Å–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ)
          const sortedAppointments = [...appointments].sort((a, b) => 
            new Date(b.createdAt) - new Date(a.createdAt)
          );
          
          sortedAppointments.forEach(appointment => {
            const user = users.find(u => u.id === appointment.userId);
            const userName = user ? `${user.firstName} ${user.lastName}` : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            const status = appointment.status === 'active' ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–û—Ç–º–µ–Ω–µ–Ω–∞';
            const statusClass = appointment.status === 'active' ? '' : 'style="opacity: 0.6;"';
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            let displayDate = appointment.date;
            try {
              if (typeof appointment.date === 'string' && !appointment.date.includes('–≥.')) {
                const dateObj = new Date(appointment.date);
                if (!isNaN(dateObj.getTime())) {
                  displayDate = dateObj.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                  });
                }
              }
            } catch (e) {
              console.log('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã:', e);
            }
            
            appointmentsHTML += `
              <div class="appointment-card" ${statusClass}>
                <div class="appointment-header">
                  <div class="appointment-title">${appointment.service}</div>
                  <div class="appointment-price">${appointment.price}</div>
                </div>
                <div class="appointment-details">
                  <div class="appointment-date">–î–∞—Ç–∞: ${displayDate}</div>
                  <div class="appointment-time">–í—Ä–µ–º—è: ${appointment.time}</div>
                </div>
                <div class="appointment-details">
                  <div>–ö–ª–∏–µ–Ω—Ç: ${userName}</div>
                  <div>–¢–µ–ª–µ—Ñ–æ–Ω: ${appointment.userPhone}</div>
                </div>
                <div class="appointment-details">
                  <div>–°—Ç–∞—Ç—É—Å: ${status}</div>
                  ${appointment.comment ? `<div>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${appointment.comment}</div>` : ''}
                </div>
                ${appointment.status === 'active' ? `
                  <div class="cancel-option">
                    <span class="cancel-text">ID –∑–∞–ø–∏—Å–∏: ${appointment.id}</span>
                    <span class="cancel-link" onclick="adminCancelAppointment(${appointment.id})">–û—Ç–º–µ–Ω–∏—Ç—å</span>
                  </div>
                ` : ''}
              </div>
            `;
          });
        }
      } else {
        // –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¢–û–õ–¨–ö–û –µ–≥–æ –∑–∞–ø–∏—Å–∏
        document.getElementById('appointmentsIntro').textContent = '–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã:';
        
        const userAppointments = appointments
          .filter(a => a.userId === currentUser.id && a.status === 'active')
          .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
        
        console.log('–ó–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userAppointments);
        
        if (userAppointments.length === 0) {
          appointmentsHTML = `
            <div class="appointment-card">
              <p>–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–æ–≤—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É", —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å.</p>
            </div>
          `;
        } else {
          userAppointments.forEach(appointment => {
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            let displayDate = appointment.date;
            try {
              if (typeof appointment.date === 'string' && !appointment.date.includes('–≥.')) {
                const dateObj = new Date(appointment.date);
                if (!isNaN(dateObj.getTime())) {
                  displayDate = dateObj.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                  });
                }
              }
            } catch (e) {
              console.log('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã:', e);
            }
            
            appointmentsHTML += `
              <div class="appointment-card" id="appointment${appointment.id}">
                <div class="appointment-header">
                  <div class="appointment-title">${appointment.service}</div>
                  <div class="appointment-price">${appointment.price}</div>
                </div>
                <div class="appointment-details">
                  <div class="appointment-date">–î–∞—Ç–∞: ${displayDate}</div>
                  <div class="appointment-time">–í—Ä–µ–º—è: ${appointment.time}</div>
                </div>
                ${appointment.comment ? `
                  <div class="appointment-details">
                    <div>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${appointment.comment}</div>
                  </div>
                ` : ''}
                <div class="cancel-option">
                  <span class="cancel-text">–ñ–µ–ª–∞–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å? üí¨Ô∏è</span>
                  <span class="cancel-link" onclick="userCancelAppointment(${appointment.id})">–î–∞</span>
                </div>
              </div>
            `;
          });
        }
      }
      
      document.getElementById('appointmentsList').innerHTML = appointmentsHTML;
    }

    // ============ –ó–ê–ì–†–£–ó–ö–ê –û–¢–ó–´–í–û–í ============

    function loadReviews() {
      const currentUser = getCurrentUser();
      const isAdmin = currentUser.role === 'admin';
      const reviews = getAllReviews();
      const users = getUsers();
      
      console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–∑—ã–≤—ã. –í—Å–µ –æ—Ç–∑—ã–≤—ã:', reviews);
      
      let reviewsHTML = '';
      
      if (isAdmin) {
        // –î–ª—è –∞–¥–º–∏–Ω–∞: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –í–°–ï –æ—Ç–∑—ã–≤—ã
        document.getElementById('reviewsTitle').textContent = '–í—Å–µ –æ—Ç–∑—ã–≤—ã';
        
        let allReviews = [];
        Object.keys(reviews).forEach(category => {
          if (reviews[category] && Array.isArray(reviews[category])) {
            reviews[category].forEach(review => {
              allReviews.push({
                ...review,
                category: category
              });
            });
          }
        });
        
        console.log('–í—Å–µ –æ—Ç–∑—ã–≤—ã –¥–ª—è –∞–¥–º–∏–Ω–∞:', allReviews);
        
        if (allReviews.length === 0) {
          reviewsHTML = '<p>–ù–µ—Ç –æ—Ç–∑—ã–≤–æ–≤</p>';
        } else {
          allReviews.forEach(review => {
            const user = users.find(u => u.id === review.userId);
            const userName = user ? `${user.firstName} ${user.lastName}` : '–ê–Ω–æ–Ω–∏–º';
            const stars = '‚òÖ'.repeat(review.rating || 5) + '‚òÜ'.repeat(5 - (review.rating || 5));
            
            reviewsHTML += `
              <div class="user-review-card">
                <h4>${review.category} - ${userName} (${review.date || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'})</h4>
                <p><strong>–û—Ü–µ–Ω–∫–∞:</strong> <span class="review-rating">${stars}</span> (${review.rating || 5}/5)</p>
                <p>${review.text || '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞'}</p>
                <div style="text-align: right; margin-top: 10px;">
                  <button class="btn-small" onclick="deleteReviewAsAdmin('${review.category}', ${review.id})" style="background: #f8c8dc; color: #000; padding: 5px 10px; border: 1px solid #000; cursor: pointer; border-radius: 0;">
                    –£–¥–∞–ª–∏—Ç—å
                  </button>
                </div>
              </div>
            `;
          });
        }
      } else {
        // –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¢–û–õ–¨–ö–û –µ–≥–æ –æ—Ç–∑—ã–≤—ã
        document.getElementById('reviewsTitle').textContent = '–ú–æ–∏ –æ—Ç–∑—ã–≤—ã';
        
        const userReviews = [];
        Object.keys(reviews).forEach(category => {
          if (reviews[category] && Array.isArray(reviews[category])) {
            reviews[category].forEach(review => {
              if (review.userId === currentUser.id) {
                userReviews.push({
                  ...review,
                  category: category
                });
              }
            });
          }
        });
        
        console.log('–û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userReviews);
        
        if (userReviews.length === 0) {
          reviewsHTML = '<p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤.</p>';
        } else {
          userReviews.forEach(review => {
            const stars = '‚òÖ'.repeat(review.rating || 5) + '‚òÜ'.repeat(5 - (review.rating || 5));
            reviewsHTML += `
              <div class="user-review-card">
                <h4>${review.category} (${review.date || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'})</h4>
                <p><strong>–û—Ü–µ–Ω–∫–∞:</strong> <span class="review-rating">${stars}</span> (${review.rating || 5}/5)</p>
                <p>${review.text || '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞'}</p>
              </div>
            `;
          });
        }
      }
      
      document.getElementById('reviewsContent').innerHTML = reviewsHTML;
    }

    // ============ –ó–ê–ì–†–£–ó–ö–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ò (–¢–û–õ–¨–ö–û –î–õ–Ø –ê–î–ú–ò–ù–û–í) ============

    function loadStatistics() {
      const users = getUsers();
      const appointments = getAllAppointments();
      const reviews = getAllReviews();
      
      // –°—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      const totalUsers = users.length;
      const activeUsers = users.filter(u => !u.blocked).length;
      const adminsCount = users.filter(u => u.role === 'admin').length;
      
      // –°—á–∏—Ç–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤
      let totalReviews = 0;
      Object.values(reviews).forEach(category => {
        if (Array.isArray(category)) {
          totalReviews += category.length;
        }
      });
      
      // –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏
      const activeAppointments = appointments.filter(a => a.status === 'active').length;
      
      // –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞
      const today = new Date().toLocaleDateString('ru-RU');
      
      // –ó–∞–ø–∏—Å–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
      const todayAppointments = appointments.filter(a => {
        try {
          if (typeof a.date === 'string') {
            return a.date.includes(today.split('.')[0]) && a.status === 'active';
          }
        } catch (e) {}
        return false;
      }).length;
      
      const statsHTML = `
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
          <div style="background: #f8c8dc; padding: 20px; text-align: center;">
            <h3>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
            <p style="font-size: 36px; font-weight: bold;">${totalUsers}</p>
            <p>–ê–∫—Ç–∏–≤–Ω—ã—Ö: ${activeUsers}</p>
          </div>
          
          <div style="background: #f8c8dc; padding: 20px; text-align: center;">
            <h3>üìÖ –ó–∞–ø–∏—Å–∏</h3>
            <p style="font-size: 36px; font-weight: bold;">${activeAppointments}</p>
            <p>–ù–∞ —Å–µ–≥–æ–¥–Ω—è: ${todayAppointments}</p>
          </div>
          
          <div style="background: #f8c8dc; padding: 20px; text-align: center;">
            <h3>‚≠ê –û—Ç–∑—ã–≤—ã</h3>
            <p style="font-size: 36px; font-weight: bold;">${totalReviews}</p>
            <p>–í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤</p>
          </div>
          
          <div style="background: #f8c8dc; padding: 20px; text-align: center;">
            <h3>üëë –ê–¥–º–∏–Ω—ã</h3>
            <p style="font-size: 36px; font-weight: bold;">${adminsCount}</p>
            <p>–û–Ω–ª–∞–π–Ω: 1</p>
          </div>
        </div>
        
        <div style="margin-top: 30px;">
          <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
          <ul>
            <li>–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${users.length > 0 ? users[users.length - 1].firstName : '–Ω–µ—Ç'}</li>
            <li>–ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å: ${appointments.length > 0 ? appointments[appointments.length - 1].service : '–Ω–µ—Ç'}</li>
            <li>–ü–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–∑—ã–≤: ${totalReviews > 0 ? '–¥–æ–±–∞–≤–ª–µ–Ω' : '–Ω–µ—Ç'}</li>
          </ul>
        </div>
      `;
      
      document.getElementById('statsContent').innerHTML = statsHTML;
    }

    // ============ –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ê–î–ú–ò–ù–û–í ============

    function adminCancelAppointment(appointmentId) {
      if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞?')) {
        const appointments = getAllAppointments();
        const appointmentIndex = appointments.findIndex(a => a.id === appointmentId);
        
        if (appointmentIndex !== -1) {
          appointments[appointmentIndex].status = 'cancelled';
          localStorage.setItem('beautySalonAppointments', JSON.stringify(appointments));
          loadAppointments();
          alert('–ó–∞–ø–∏—Å—å –æ—Ç–º–µ–Ω–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º!');
        }
      }
    }

    function deleteReviewAsAdmin(category, reviewId) {
      if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤?')) {
        const reviews = getAllReviews();
        if (reviews[category] && Array.isArray(reviews[category])) {
          reviews[category] = reviews[category].filter(review => review.id !== reviewId);
          localStorage.setItem('beautySalonAllReviews', JSON.stringify(reviews));
          loadReviews();
          alert('–û—Ç–∑—ã–≤ —É–¥–∞–ª–µ–Ω!');
        }
      }
    }

    // ============ –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ============

    function userCancelAppointment(appointmentId) {
      if (confirm('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?')) {
        const appointments = getAllAppointments();
        const appointmentIndex = appointments.findIndex(a => a.id === appointmentId);
        
        if (appointmentIndex !== -1 && appointments[appointmentIndex].userId === getCurrentUser().id) {
          appointments[appointmentIndex].status = 'cancelled';
          localStorage.setItem('beautySalonAppointments', JSON.stringify(appointments));
          loadAppointments();
          alert('–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –æ—Ç–º–µ–Ω–µ–Ω–∞!');
        } else {
          alert('–û—à–∏–±–∫–∞: –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –µ—ë –æ—Ç–º–µ–Ω–∏—Ç—å!');
        }
      }
    }

    // ============ –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –î–ê–ù–ù–´–• –í –†–ï–ñ–ò–ú–ï –†–ï–ê–õ–¨–ù–û–ì–û –í–†–ï–ú–ï–ù–ò ============

    function setupInlineEditing() {
      const editButtons = document.querySelectorAll('.edit-btn');
      
      editButtons.forEach(button => {
        button.addEventListener('click', function() {
          const field = this.getAttribute('data-field');
          const fieldElement = document.getElementById(`${field}Field`);
          const textElement = document.getElementById(`${field}Text`);
          const currentValue = textElement.textContent;
          
          // –ï—Å–ª–∏ –ø–æ–ª–µ "–ü–∞—Ä–æ–ª—å", –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É
          if (field === 'password') {
            const newPassword = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:');
            if (newPassword && newPassword.length >= 6) {
              const confirmPassword = prompt('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:');
              if (newPassword === confirmPassword) {
                const currentUser = getCurrentUser();
                currentUser.password = newPassword;
                if (updateUser(currentUser)) {
                  alert('–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!');
                }
              } else {
                alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
              }
            } else if (newPassword) {
              alert('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤!');
            }
            return;
          }
          
          // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª–µ–π
          let newValue;
          if (field === 'phone') {
            newValue = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:', currentValue);
          } else {
            newValue = prompt(`–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è ${field === 'firstName' ? '–∏–º–µ–Ω–∏' : '—Ñ–∞–º–∏–ª–∏–∏'}:`, currentValue);
          }
          
          if (newValue && newValue.trim() !== '') {
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            textElement.textContent = newValue.trim();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ LocalStorage
            const currentUser = getCurrentUser();
            if (field === 'firstName') {
              currentUser.firstName = newValue.trim();
              document.getElementById('welcomeName').textContent = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${newValue.trim()}`;
            } else if (field === 'lastName') {
              currentUser.lastName = newValue.trim();
            } else if (field === 'phone') {
              currentUser.phone = newValue.trim();
            }
            
            if (updateUser(currentUser)) {
              // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
              document.getElementById('editFirstName').value = currentUser.firstName || '';
              document.getElementById('editLastName').value = currentUser.lastName || '';
              document.getElementById('editPhone').value = currentUser.phone || '';
            }
          }
        });
      });
    }

    // ============ –§–û–†–ú–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –î–ê–ù–ù–´–• ============

    function setupEditForm() {
      const editForm = document.getElementById('editForm');
      
      editForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const currentUser = getCurrentUser();
        if (!currentUser) {
          alert('–û—à–∏–±–∫–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω!');
          return;
        }
        
        const firstName = document.getElementById('editFirstName').value.trim();
        const lastName = document.getElementById('editLastName').value.trim();
        const phone = document.getElementById('editPhone').value.trim();
        const newPassword = document.getElementById('editPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è
        if (!firstName || !lastName || !phone) {
          alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
          return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
        if (newPassword) {
          if (newPassword.length < 6) {
            alert('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤!');
            return;
          }
          if (newPassword !== confirmPassword) {
            alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
            return;
          }
          currentUser.password = newPassword;
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        currentUser.firstName = firstName;
        currentUser.lastName = lastName;
        currentUser.phone = phone;
        
        if (updateUser(currentUser)) {
          // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
          document.getElementById('firstNameText').textContent = firstName;
          document.getElementById('lastNameText').textContent = lastName;
          document.getElementById('phoneText').textContent = phone;
          document.getElementById('welcomeName').textContent = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${firstName}`;
          
          alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!');
          
          // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –ø–∞—Ä–æ–ª—è
          document.getElementById('editPassword').value = '';
          document.getElementById('confirmPassword').value = '';
        } else {
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö!');
        }
      });
    }

    // ============ –ö–ù–û–ü–ö–ê –í–´–•–û–î–ê ============

    function setupLogout() {
      document.getElementById('logoutButton').addEventListener('click', function() {
        if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?')) {
          // –£–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ LocalStorage
          localStorage.removeItem('currentUser');
          
          // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
          window.location.href = 'index.html';
        }
      });
    }

    // ============ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ú–ï–ñ–î–£ –í–ö–õ–ê–î–ö–ê–ú–ò ============

    function setupTabSwitching() {
      const menuButtons = document.querySelectorAll('.menu-button');
      
      // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
      menuButtons.forEach(button => {
        button.addEventListener('click', function() {
          const targetId = this.getAttribute('data-target');
          switchToTab(targetId, this);
        });
      });
    }

    function switchToTab(tabId, clickedButton) {
      console.log('–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É:', tabId);
      
      // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏
      document.querySelectorAll('.content-area').forEach(section => {
        section.classList.remove('active');
      });
      
      // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
      document.querySelectorAll('.menu-button').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é –≤–∫–ª–∞–¥–∫—É
      const targetSection = document.getElementById(tabId);
      if (targetSection) {
        targetSection.classList.add('active');
      }
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
      if (clickedButton) {
        clickedButton.classList.add('active');
      }
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
      switch(tabId) {
        case 'appointments':
          console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–ø–∏—Å–∏...');
          loadAppointments();
          break;
        case 'reviews':
          console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–∑—ã–≤—ã...');
          loadReviews();
          break;
        case 'statistics':
          console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É...');
          loadStatistics();
          break;
      }
    }

    // ============ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´ ============

    document.addEventListener('DOMContentLoaded', function() {
      console.log('=== –ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ ===');
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      const currentUser = loadUserData();
      
      if (currentUser) {
        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ:', currentUser.firstName);
        
        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
        setupInlineEditing();
        setupEditForm();
        setupLogout();
        setupTabSwitching();
        
        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É "–ú–æ–∏ –∑–∞–ø–∏—Å–∏" –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        // –∏ "–í—Å–µ –∑–∞–ø–∏—Å–∏" –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
        if (currentUser.role === 'admin') {
          const adminAppointmentsButton = document.querySelector('#adminMenuButtons .menu-button[data-target="appointments"]');
          if (adminAppointmentsButton) {
            adminAppointmentsButton.click();
          }
        } else {
          const userAppointmentsButton = document.querySelector('#userMenuButtons .menu-button[data-target="appointments"]');
          if (userAppointmentsButton) {
            userAppointmentsButton.click();
          }
        }
        
        console.log('=== –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω ===');
      } else {
        console.log('=== –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ===');
      }
    });
  </script>
</body>
</html>